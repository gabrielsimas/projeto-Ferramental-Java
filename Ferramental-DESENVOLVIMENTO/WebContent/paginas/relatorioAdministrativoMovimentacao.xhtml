<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html" 
     xmlns:p="http://primefaces.org/ui"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:f="http://java.sun.com/jsf/core">  
   
    <h:head>
        <title>:.Medral Tecnologia Penha.:</title>
        <h:outputScript name="../include/funcoes.js"></h:outputScript>
    </h:head>
    
     <h:body style="background-color: paleturquoise">
         <ui:include src="/paginas/menu.xhtml"/>
    <h:form id="form">   
    <p:growl id="avisos" showDetail="true" life="3000" />  

    <p:fieldset legend="RELATÓRIO DE MOVIMENTAÇÃO:" toggleable="true" id="buscaDados">
       <h:panelGrid columns="2">
            <h:outputText value="MATRÍCULA"/>
            <p:inputText value="#{relatoriosBean.matricula}" maxlength="8" size="10" onkeydown="ForceNumericInput(event, this, false, false)"/>
            
            <h:outputText value="PLACA"/>
            <p:inputMask mask="aaa-9999" value="#{relatoriosBean.matricula}" maxlength="7" size="10"/>
            
            <h:outputText value="RASTREABILIDADE:"/>
            <p:inputText id="rastreabilidade" value="#{relatoriosBean.rastreabilidade}" maxlength="8" size="10"/>
            
            <h:outputText value="PRODUTO:"/>
            <p:inputText id="produto" value="#{relatoriosBean.produto}" maxlength="25" size="40"/>
            
			<p:commandButton value="CONSULTAR" actionListener="#{relatoriosBean.gerarRelatorioAdministrativoMovimentacao}" type="submit" update="mostraDados, buscaDados"  />
	        <p:commandButton value="IMPRIMIR" rendered="#{not empty relatoriosBean.listaRelatorio}" type="submit"  actionListener="#{relatoriosBean.imprimirRelatorioAdministrativoMovimentacao}" ajax="false" />
        </h:panelGrid>
  	</p:fieldset> 
    
    <p:fieldset legend="LISTA GERAL:" toggleable="true" id="mostraDados">  

            <p:dataTable id="dataTable" value="#{relatoriosBean.listaRelatorio}" var="lista">

                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Tipo" />
                    </f:facet>
                    <h:outputText value="#{lista.tipo}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Chapa / Placa " />
                    </f:facet>
                    <h:outputText value="#{lista.chapa}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Colaborador" />
                    </f:facet>
                    <h:outputText value="#{lista.funcionario}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Data" />
                    </f:facet>
                    <h:outputText value="#{lista.data}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Motivo" />
                    </f:facet>
                    <h:outputText value="#{lista.motivo}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Produto" />
                    </f:facet>
                    <h:outputText value="#{lista.produto}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Status" />
                    </f:facet>
                    <h:outputText value="#{lista.status}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Rastreamento" />
                    </f:facet>
                    <h:outputText value="#{lista.rastreamento}" />
                </p:column>
                
                 <p:column>
                    <f:facet name="header">
                        <h:outputText value="Destino" />
                    </f:facet>
                    <h:outputText value="#{lista.destino}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Quantidade" />
                    </f:facet>
                    <h:outputText value="#{lista.quantidade}" />
                </p:column>
                
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Usuário" />
                    </f:facet>
                    <h:outputText value="#{lista.usuario}" />
                </p:column>
                
            </p:dataTable>
            
        </p:fieldset>     
     </h:form> 
    </h:body>  
 </html> 

