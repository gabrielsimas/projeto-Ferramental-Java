<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html" 
     xmlns:p="http://primefaces.org/ui" 
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:f="http://java.sun.com/jsf/core">  
   
    <h:head>
    	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
       <title>Cadastro de Fornecedores</title>
    </h:head>
    
    <f:view contentType="text/html" />
    
    <h:body style="background-color: paleturquoise">

	<!-- <ui:include src="menu.xhtml" /> -->
	
	<h:form id="frmCadastro">
		<p:panel id="pnlCadastro" header="Cadastro de Fornecedores">
					
			<p:messages showDetail="true" autoUpdate="true"/>
			<p:panelGrid columns="2">
				<h:outputText value="CNPJ:"/>
				<p:inputMask mask="999.999.999/9999-99" value="#{fornecedorBean.fornecedor.cnpj}" size="50"/>
				
				<h:outputText value="Nome:"/>
				<p:inputText value="#{fornecedorBean.fornecedor.nome}" size="50" />
				
				<h:outputText value="Endere&ccedil;o:"/>
				<p:inputText value="#{fornecedorBean.fornecedor.endereco}" size="50" />
				
				<h:outputText value="Telefone:"/>
				<p:inputMask mask="(99)9999-9999" value="#{fornecedorBean.fornecedor.telefone}" size="50" />
				
				<h:outputText value="E-mail"/>
				<p:inputText value="#{fornecedorBean.fornecedor.email}" size="50" />
				
				<p:commandButton value="#{fornecedorBean.textoBotao}" actionListener="#{fornecedorBean.cadastrar}" update=":frmListagem">
					<f:setPropertyActionListener target="#{fornecedorBean.textoBotao}" value="Cadastrar"/>
        			<f:setPropertyActionListener target="#{fornecedorBean.atualizacao}" value="true"/>
				</p:commandButton>
				
				<p:commandButton value="Limpar" actionListener="#{fornecedorBean.limpar}" update=":frmCadastro">
					<f:setPropertyActionListener target="#{fornecedorBean.atualizacao}" value="true"/>
        			<f:setPropertyActionListener target="#{fornecedorBean.textoBotao}" value="Cadastrar"/>
				</p:commandButton>
			</p:panelGrid>
		</p:panel>
	</h:form>
	
	<!-- Listagem -->
	<h:form id="frmListagem">
		<p:panel header="Fornecedores cadastrados">
			<p:dataTable value="#{fornecedorBean.fornecedores}" var="listaFornecedor" paginator="true" rows="3">
				<p:column headerText="CNPJ" filterBy="#{listaFornecedor.cnpj}" filterMatchMode="contains">
					<p:commandLink value="#{listaFornecedor.cnpj}" update=":frmCadastro:pnlCadastro">
						<f:setPropertyActionListener target="#{fornecedorBean.fornecedor}" value="#{listaFornecedor}" />
						<f:setPropertyActionListener target="#{fornecedorBean.atualizacao}" value="true"/>
        				<f:setPropertyActionListener target="#{fornecedorBean.textoBotao}" value="Atualizar"/>
					</p:commandLink>
				</p:column>
				
				<p:column headerText="Raz&atilde;o Social">
					<h:outputText value="#{listaFornecedor.nome}"/>
				</p:column>
				
				<p:column headerText="Endere&ccedil;o">
					<h:outputText value="#{listaFornecedor.endereco}"/>
				</p:column>
				
				<p:column headerText="Telefone">
					<h:outputText value="#{listaFornecedor.telefone}"/>
				</p:column>
				
				<p:column headerText="Endere&ccedil;o">
					<h:outputText value="#{listaFornecedor.email}"/>
				</p:column>
				
				<p:column headerText="Opera&ccedil;&atilde;o">
					<p:commandButton value="Excluir" actionListener="#{fornecedorBean.excluir}" update=":frmListagem,:frmCadastro">
        					<f:param id="idFornecedor" name="idFornecedor" value="#{listaFornecedor.id}" />
        					<f:setPropertyActionListener target="#{fornecedorBean.atualizacao}" value="true"/>
        				</p:commandButton>
				</p:column>
				
			</p:dataTable>
		</p:panel>
	</h:form>

	</h:body>  

 </html> 
 	